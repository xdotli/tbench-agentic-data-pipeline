Waiting for API to start...
API started successfully
============================= test session starts ==============================
platform linux -- Python 3.11.14, pytest-8.4.1, pluggy-1.6.0
rootdir: /tests
plugins: json-ctrf-0.3.5, anyio-4.11.0
collected 11 items

../tests/test_state.py ......F....                                       [100%]

=================================== FAILURES ===================================
_________________________ test_job_status_transitions __________________________

client = <httpx.Client object at 0xffff82e4b890>

    def test_job_status_transitions(client):
        """Test that job status transitions through correct states"""
        submit_response = client.post(
            "/submit",
            params={"task_type": "status_test", "data": {"check": "transitions"}}
        )
        job_id = submit_response.json()["job_id"]
    
        # Initial state should be pending
        initial_response = client.get(f"/status/{job_id}")
        initial_status = initial_response.json()["status"]
>       assert initial_status == "pending", "Initial status should be pending"
E       AssertionError: Initial status should be pending
E       assert 'processing' == 'pending'
E         
E         - pending
E         + processing

/tests/test_state.py:99: AssertionError
==================================== PASSES ====================================
=========================== short test summary info ============================
PASSED ../tests/test_state.py::test_health_endpoint
PASSED ../tests/test_state.py::test_workers_are_started
PASSED ../tests/test_state.py::test_submit_job
PASSED ../tests/test_state.py::test_get_job_status_exists
PASSED ../tests/test_state.py::test_get_job_status_not_found
PASSED ../tests/test_state.py::test_job_gets_processed
PASSED ../tests/test_state.py::test_completed_at_timestamp
PASSED ../tests/test_state.py::test_multiple_jobs_concurrent
PASSED ../tests/test_state.py::test_queue_empties_after_processing
PASSED ../tests/test_state.py::test_job_data_preserved
FAILED ../tests/test_state.py::test_job_status_transitions - AssertionError: ...
======================== 1 failed, 10 passed in 14.37s =========================
